## 前端开发规范
### 1基础层设计
1.1、代码仓库
使用git管理代码，包括代码管理、版本管理、权限管理、提交日志查询。具有强大的分支功能。
![Image text](https://tva1.sinaimg.cn/large/007DFXDhgy1g3whlv3y91j30nu0jp0tg.jpg)

1.2、版本管理
+ 发布后分支锁死，不可再更改：例如1.1版本成功发布后，不可再更改v1.1分支上的代码，否则可能导致版本管理混乱。如果有bug，可以发布补丁版本，如v1.1sp1
+ 多版本并存，指例如发布v1.1版本后，v1.0版本应仍保存在线上，当出现线上Bug时，方便快速回滚到上一版本
+ 使用变量控制新的需求。在项目中新建一个toggle.js，里面存着需求的开关，当某个需求某个用户不需要的时候，可以直接将变量设置为false即可。或者线上某个功能不可用的时候，直接将变量设置为false。

1.3 统一脚手架
+ 减少开发人员配置脚手架带来的时间损耗。vue使用vue-cli,react使用umi
+ 统一项目结构，方便管理，也降低项目交接时带来的需要熟悉项目的时间
+ 方便统一技术栈，可以预先引入固定的组件库，统一组件库后，不要自己引入第三方库

1.4 埋点系统
+ 后面可以一个前端的埋点系统，记录每个页面的访问量、记录每个功能的使用量、捕捉报错情况、图表化显示。
通过埋点系统可以更加深刻把握用户的习惯，给产品经理、运营等人员提供准确的数据依据，当有了数据后，前端就可以针对性优化功能、布局、页面交互逻辑、用户使用流程
+ 在埋点系统做稳定了之后，基于埋点系统建立监控和报警系统，例如每过一段时间自动汇总/报错触发者的相关信息，提高项目的稳定性，降低Bug数
```
$(document).ready(()=>{
// ... 这里是你的业务逻辑代码
sendData(params);  //这里是发送你的埋点数据，params是你封装的埋点数据
});
// 按钮点击时发送埋点请求
$('button').click(()=>{
// ... 业务逻辑
sendData(params); //同上
});
```
或者
```
<button data-mydata="{key:'uber_comt_share_ck', act: 'click',msg:{}}">打车</button>
```

1.5 安全管理
+ 防止XSS注入：对于用户输入的内容，需要转码，比如输入框输入需要下发给后台的内容，禁止使用eval函数，使用统一的转码函数
+ 密码加密，不明文显示，传给后台也要加密
减少安全漏洞，避免用户受到损失，避免遭遇恶意的攻击，增加系统的稳定性和安全性
```
在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。

在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。

在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。

在标签的 href、src 等属性中，包含 javascript: 等可执行代码。

在 onload、onerror、onclick 等事件中，注入不受控制代码。

在 style 属性和标签中，包含类似 background-image:url("javascript:…"); 的代码（新版本浏览器已经可以防范）。

在 style 属性和标签中，包含类似 expression(…) 的 CSS 表达式代码（新版本浏览器已经可以防范）。
```
![Image text](https://tva1.sinaimg.cn/large/007DFXDhgy1g3wglf8tegj30uq0eeq40.jpg)

1.6 Eslint 
+ 每个前端开发必须装eslint!!!!
+ 使用统一的eslint配置文件，降低低级Bug出现的概率，如拼写问题
+ 增加代码的可维护性，可阅读性
+ 硬性统一代码风格，团队协作起来更轻松
+ 增加git提交前eslint检查功能，配置pre-commit,每次提交代码前都会运行检查代码
![Image text](https://tva1.sinaimg.cn/large/007DFXDhgy1g3wgnquzp8j30pj0le3zu.jpg)ss

1.7 Mock
在后端接口未好时，或者接口暂时不通时，生成返回的数据，前后端并行开发
+ 将mock嵌入脚手架

### 2应用层设计
2.1 技术栈统一
+ 组件库vue -- element-ui,react -- ant-design ，开发需求时，必须从组件库挑选封装，不要用原生的
https://element.eleme.cn/#/zh-CN,  https://ant.design/index-cn
+ 特殊的第三方库统一使用一个版本，例如图表echart等
+ 基础建设避免重复造轮子，尽量将可以复用的封装成组件
简化团队成员的培养成本，提高项目可持续性

2.2 浏览器兼容性
+ 配置postcss,让某些css增加兼容性前缀
+ webpack的loader配置，处理特殊场景
+ 规范团队代码，使用稳定的写法

2.3 严格按照设计稿开发
一边看着设计稿，一边编码，确保和需求描述无误，如有问题和产品进行沟通后更改
+ 所有设计稿里或之外的文字统一写在language/zh-cn.js里，不同的模块区分开，保证每个字都是一样的，某些公共文字写在顶部，方便统一管理修改文字，在页面中使用i18n引入对应文字
![Image text](https://tva1.sinaimg.cn/large/007DFXDhgy1g3wgwaapkxj30ne0ffdgn.jpg)

2.4 错误码
+ 所有接口的错误码统一写在exception.js里，接口报错使用错误码对应的提示

### 3开发时规范
3.1 文件命名规范
+ html，css，js，lib，images文件均存放至项目的目录中。如果使用相关前端框架，根据框架的文件格式进行合理布局。
+ 所有文件夹及文件使用英文命名（避免使用中文路径），驼峰式命名如RealTime,不要用中文。相同的功能模块文件如.js,.css使用统一的文件名

3.2 html
+ 所有编码需要遵循html（XML）标准，标签&属性&属性命名必须由小写字母及下划线数字组成，且所有标签必须闭合，包括br()，hr()等。属性值用双引号。
+ 书写时利用IDE实现层次分明的缩进（默认缩进4空格）。
+ 书写页面过程中，请考虑向后扩展性。class&id参见css书写规范
+ 语义化html，如标题根据重要性用h*(同一页面只能有一个h1)，段落标记用p，列表用ul，内联元素中不可嵌套块级元素，按钮不要用span来实现！！！
+ 尽可能减少div多层级嵌套
+ 书写链接地址时，必须避免重定向，例如：href="http://***.com/"，即须在URL地址后面加上"/"
+ 在页面中尽量避免使用style属性，即style="…",可以复用的样式，编写通用class
+ 必须为含有描述性表单元素(input，textarea)添加label，如
```
<input type="text" label="姓名">
```
+ 能以背景形式呈现的图片，尽量写入css样式中
+ 重要图片必须加上alt属性。给重要的元素和截断的元素加上title
+ 给区块代码及重要功能加上注释，方便别人阅读代码

3.3 css
+ 在如app.css的最顶级样式中，定义全局样式，不要随意修改，例如.ml10:{margin-left: 10px}
+ class与id的使用：id是唯一的并是父级的，class是可以重复的并是子级的，所以id仅使用在大的模块上，或者需要特殊用途的模块，class可用在重复使用率高及子级中，尽量通过class属性定义样式！！！
+ class与id命名：大的框架命名比如header/footer/wrapper/left/right之类的在app.css中由统一命名。每个模块的标题样式统一使用一个的class,不要自己去定义一些通用样式！！！class应以功能或内容命名，不以表现形式命名,由小写英文&数字&来组合命名，如i-comment，font-red，width200。避免使用中文拼音，尽量使用简易的单词组合。总之，命名要语义化，简明化
+ 书写代码前，提高样式重复使用率
+ 充分利用html自身属性及样式继承原理减少代码量
+ 减少使用影响性能的属性，比如position：absolute||float
+ 必须为大区块样式添加注释，小区块适量注释
+ 写css属性时，‘：’后面加一个空格增加可读性

3.4 js
+ 不要随意引入第三方库，有需要商量后引入
+ 变量命名：驼峰式命名.原生JS变量要求是纯英文字母，首字母须小写，如myVue。jQuery变量要求首字符为'_'，其他与原生JS规则相同，如：_myVue。另，要求变量集中声明，避免全局变量. 表单、表格等里面有很多变量的用一个对象来统一管理！！！！不要使用太多变量
+ 类命名：首字母大写，驼峰式命名。如MyVue
+ 函数命名：首字母小写驼峰式命名。如myVue()
+ 常量命名： 全部大写 const ACTION = 'read'
+ 命名语义化，尽可能利用英文单词或其缩写
+ 尽量避免使用存在兼容性及消耗资源的方法或属性，比如eval_r()&innerText
+ 代码结构明了，加适量注释。提高函数重用率。有复用的函数必须提取出来！！！
+ 尽量减少重排重绘，提升页面性能
+ 禁止修改内置对象的原型
+ 三元操作符用于替代 if 条件判断语句。 a ? b : c
+ 二元布尔操作符是可短路的, 只有在必要时才会计算到最后一项 valueA && funB()
+ 尽量在每个页面写上init()函数，方便读代码的人找到入口

函数注释，有必要注释的尽量注释，没必要的不去注释
/**
 * 函数描述
 *
 * @param {string} p1 参数1的说明
 * @param {string} p2 参数2的说明，比较长
 * 那就换行了.
 * @param {number=} p3 参数3的说明（可选）
 * @return {Object} 返回值描述
 */

### 参考阅读
https://github.com/ecomfe/spec 百度前端规范
https://github.com/Aaaaaashu/Guide 前端开发规范手册



